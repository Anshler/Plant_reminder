WindowManager:
    LoginScreen:
        id: login_screen
        name: 'login_screen'
    # Forget password
    ForgetPasswordEmailScreen:
        id: forget_password_email_screen
        name: 'forget_password_email_screen'
    ForgetPasswordOTPScreen:
        id: forget_password_otp_screen
        name: 'forget_password_otp_screen'
    ForgetPasswordNewPassScreen:
        id: forget_password_new_pass_screen
        name: 'forget_password_new_pass_screen'
    # Sign up
    SignUpScreen:
        id: sign_up_screen
        name: 'sign_up_screen'
    SignUpOTPScreen:
        id: sign_up_top_screen
        name: 'sign_up_top_screen'
    # Main screen
    MasterScreen:
        id: master_screen
        name: 'master_screen'
    #SettingScreen:

<LoginScreen>:
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.975}

        Label:
            id: welcome
            text: 'WELCOME!'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: welcome2
            text: 'Welcome to a house of indoor plant lovers'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

    FloatLayout: # Authentication
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.5}

        FloatLayout:
            pos_hint: {'center_x':0.5,'center_y':0.9}
            Image:
                source: 'layout/img/usrnm.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                color: 1, 1, 1, 1  # Set image color to full opacity
            MDTextField:
                id: username
                hint_text: 'username or email'
                max_text_length: 50
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

        FloatLayout:
            pos_hint: {'center_x':0.5, 'center_y':0.6}
            Image:
                source: 'layout/img/psswrd.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                color: 1, 1, 1, 1  # Set image color to full opacity
            MDTextField:
                id: password
                hint_text: 'case sensitive'
                max_text_length: 50
                password: True
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

        Button:
            id: login_button
            name: 'login_button'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'y':0}
            background_color: 0,0,0,0
            on_press: root.press_login_animation(self)
            on_release: root.login(self)
            Image:
                id: login_button_image
                color: 1, 1, 1, 1  # Set image color to full opacity
                source: 'layout/img/login.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            Label:
                id: login_button_text
                text: 'Login'
                color: app.background_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

        Button:
            id: forget_password
            name: 'forget_password'
            text: 'forget password?'
            size_hint: 0.4,0.1
            pos_hint: {'right':1,'center_y':0.4}
            font_size: self.height*0.6
            color: app.secondary_font_color
            background_color: 0,0,0,0
            disabled: False
            on_press:
                root.press_button(self)
            on_release:
                root.release_button(self)
            Image:
                id: forget_password_image
                color: 0,0,0,0  # Set image color to full opacity
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y

        Label:
            id: wrong
            name: 'wrong'
            text: 'username or password incorrect.'
            size_hint: 0.4,0.1
            pos_hint: {'x':0.12,'center_y':0.4}
            font_size: self.height*0.6
            color: 0,0,0,0
            background_color: 0,0,0,0

    Label:
        id: or
        text: 'Or'
        pos_hint: {'center_x': 0.5, 'center_y': 0.4}
        font_size: self.parent.height*0.03
        color: app.secondary_font_color

    Button:
        id: sign_up
        name: 'sign_up'
        text: 'Don\'t have an account? Sign Up'
        size_hint: 0.7,0.05
        pos_hint: {'center_x':0.5,'center_y':0.125}
        font_size: self.height*0.5
        color: app.primary_font_color
        background_color: 0,0,0,0
        on_press:
            root.press_button(self)
        on_release:
            root.release_button(self)
        Image:
            id: sign_up_image
            color: 0,0,0,0  # Set image color to full opacity
            width: self.parent.width
            height: self.parent.height
            center_x: self.parent.center_x
            center_y: self.parent.center_y

    FloatLayout: # Signin other method
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'center_y':0.175}

        Button:
            id: login_google
            name: 'login_google'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'center_y':0.9}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
            on_release:
                root.release_button(self)
            Image:
                id: login_google_image
                source: 'layout/img/signin_google.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
            Label:
                id: login_google_text
                text: 'Sign in with Google'
                color: app.secondary_font_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

        Button:
            id: login_facebook
            name: 'login_facebook'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'center_y':0.6}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
            on_release:
                root.release_button(self)
            Image:
                id: login_facebook_image
                source: 'layout/img/signin_facebook.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
            Label:
                id: login_facebook_text
                text: 'Sign in with Facebook'
                color: app.secondary_font_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

<ForgetPasswordEmailScreen>:
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout: # Back_button_region
        size_hint: 1, 1.15/12
        pos_hint: {'center_x': 0.5, 'top': 1}
        canvas:
            Color:
                rgba: 0, 0, 0, 0
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            id: back_button
            size_hint: None, 0.9/1.25
            width: self.height
            pos_hint: {'center_x': 1.00001/12, 'center_y': 0.5}
            background_color: 0,0,0,0
            on_press:
                root.press_back(self)
            on_release:
                root.release_back(self)
            Image:
                id: back_button_image
                source: 'layout/img/backbutton.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                width: self.parent.width
                height: self.parent.height

    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.925}

        Label:
            id: forget_password_title
            text: 'Forget Password?'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: forget_password_title2
            text: 'Enter this so we can send you the reset code'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

    FloatLayout: # Enter email
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.5}

        FloatLayout:
            pos_hint: {'center_x':0.5,'center_y':0.9}
            Image:
                source: 'layout/img/usrnm.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                color: 1, 1, 1, 1  # Set image color to full opacity
            MDTextField:
                id: username_forget
                hint_text: 'email account'
                max_text_length: 50
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

        Button:
            id: next_forget_button
            name: 'next_forget_button'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5, 'center_y':0.6}
            background_color: 0,0,0,0
            on_press: root.press_next_animation(self)
            on_release: root.to_otp(self)
            Image:
                id: next_forget_button_image
                color: 1, 1, 1, 1  # Set image color to full opacity
                source: 'layout/img/login.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            Label:
                id: next_forget_button_text
                text: 'Next'
                color: app.background_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3
        Label:
            id: wrong_email
            name: 'wrong_email'
            text: 'wrong email.'
            size_hint: 0.4,0.1
            pos_hint: {'x':0.12,'center_y':0.4}
            font_size: self.height*0.6
            color: 0,0,0,0
            background_color: 0,0,0,0

<ForgetPasswordOTPScreen>:
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout: # Back_button_region
        size_hint: 1, 1.15/12
        pos_hint: {'center_x': 0.5, 'top': 1}
        canvas:
            Color:
                rgba: 0, 0, 0, 0
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            id: back_button
            size_hint: None, 0.9/1.25
            width: self.height
            pos_hint: {'center_x': 1.00001/12, 'center_y': 0.5}
            background_color: 0,0,0,0
            on_press:
                root.press_back(self)
            on_release:
                root.release_back(self)
            Image:
                id: back_button_image
                source: 'layout/img/backbutton.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                width: self.parent.width
                height: self.parent.height

    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.925}

        Label:
            id: verification_code_title
            text: 'Verification Code'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: verification_code_title2
            text: 'Enter 6-digit code we sent to your email and phone'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

    FloatLayout: # OTP
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.5}

        TextInput:
            id: otp_pass1
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x':1.000001/12,'center_y':0.9}
            font_size: self.height*0.6
            multiline: False
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            on_text:
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass2.focus = True

        TextInput:
            id: otp_pass2
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 3/12,'center_y':0.9}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            on_text:
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass3.focus = True
        TextInput:
            id: otp_pass3
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 5/12,'center_y':0.9}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            on_text:
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass4.focus = True
        TextInput:
            id: otp_pass4
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 7/12,'center_y':0.9}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            on_text:
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass5.focus = True
        TextInput:
            id: otp_pass5
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 9/12,'center_y':0.9}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            on_text:
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass6.focus = True
        TextInput:
            id: otp_pass6
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 11/12,'center_y':0.9}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            on_text: if len(self.text) >= 1: self.text = self.text[0]

        Button:
            id: confirm_otp_button
            name: 'confirm_otp_button'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'center_y':0.6}
            background_color: 0,0,0,0
            on_press: root.press_confirm_animation(self)
            on_release: root.to_new_pass(self)
            Image:
                id: confirm_otp_button_image
                color: 1, 1, 1, 1  # Set image color to full opacity
                source: 'layout/img/login.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            Label:
                id: confirm_otp_button_text
                text: 'Confirm'
                color: app.background_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

    Button:
        id: resend_code
        name: 'resend_code'
        text: 'Didnâ€™t receive the code? Send again'
        size_hint: 0.7,0.05
        pos_hint: {'center_x':0.5,'center_y':0.125}
        font_size: self.height*0.5
        color: app.primary_font_color
        background_color: 0,0,0,0
        on_press:
            root.press_button(self)
        on_release:
            root.release_button(self)
        Image:
            id: resend_code_image
            color: 0,0,0,0  # Set image color to full opacity
            width: self.parent.width
            height: self.parent.height
            center_x: self.parent.center_x
            center_y: self.parent.center_y

<ForgetPasswordNewPassScreen>
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.925}

        Label:
            id: create_new_pass_title
            text: 'Create New Password'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: create_new_pass_title2
            text: 'please dont forget it too!'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

<MasterScreen>:
    Button:
        id: swipe
        background_color: 0,0,0,0
        on_release: root.swipe_home_buttons(self)
        collide_children: False
    MainPagesManager:
        id: main_pages
        name: 'main_pages'
    UtilityBars:
        id:utility_bars
        name: 'utility_bars'

<MainPagesManager>:
    HomePage:
        id: home_page
        name: 'home_page'
    PlantProfilePage:
        id: plant_profile_page
        name: 'plant_profile_page'
    CalendarPage:
        id: calendar_page
        name: 'calendar_page'
    CommunityPage:
        id: community_page
        name: 'community_page'
    WikiPage:
        id: wiki_page
        name: 'wiki_page'
    ShoppingPage:
        id: shopping_page
        name: 'shopping_page'

<HomePage>:
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'layout/img/background.png'

    Button:
        text: 'home page'
        size_hint: 0.8,0.25
        pos_hint: {'center_x': 0.5, 'center_y':0.5}
        background_color: 0,0,0,0.5
        on_release: root.test(self)
        collide_children: False

<PlantProfilePage>:
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'layout/img/background2.png'

<CalendarPage>:
    Image:
        source: 'layout/img/background3.png'
        keep_ratio: True
        color: 1, 1, 1, 1  # Set image color to full opacity

<CommunityPage>:
    Image:
        source: 'layout/img/background4.png'
        keep_ratio: True
        color: 1, 1, 1, 1  # Set image color to full opacity


<WikiPage>:
    Image:
        source: 'layout/img/background5.png'
        keep_ratio: True
        color: 1, 1, 1, 1  # Set image color to full opacity

<ShoppingPage>:
    Image:
        source: 'layout/img/background6.png'
        keep_ratio: True
        color: 1, 1, 1, 1  # Set image color to full opacity

<UtilityBars>:
    FloatLayout: # upper bar, mainly for setting
        Button: # setting button
            size_hint: None,1/12
            width: self.height
            pos_hint: {'center_x': 11/12, 'top':1}
            background_color: 0,0,0,0
            on_release:
                root.open_setting(self)

            FloatLayout:
                height: self.parent.height*0.75
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                canvas:
                    Color:
                        rgba: 176/255, 211/255, 141/255, 1
                    Ellipse:
                        pos: self.pos
                        size: self.size
            Image:
                source: 'layout/img/setting_icon.png'
                height: self.parent.height*0.8
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity

    FloatLayout: # bottom bar
        orientation: 'horizontal'
        size_hint: 1, 1.15/12
        #height: self.width*1.25/6
        pos_hint: {'center_x': 0.5, 'y': 0}

        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        FloatLayout: # Selection highlight for home buttons
            id:home_highlight
            size_hint: None, 0.9/1.25
            width: self.height
            pos_hint: {'center_x': 1.00001/12, 'center_y': 0.5}
            canvas:
                Color:
                    rgba: 176/255, 211/255, 141/255, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

        # All the selection buttons
        Button:
            id: home
            name: 'home'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 1.00001/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/home_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: False
                keep_ratio: False
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: plant_profile
            name: 'plant_profile'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 3/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/plant_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: calendar
            name: 'calendar'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 5/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/calendar_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: community
            name: 'community'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 7/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/community_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: wiki
            name: 'wiki'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 9/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/wiki_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: shopping
            name: 'shopping'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 11/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/shopping_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity