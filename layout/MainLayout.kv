#: import Gradient kivy_gradient.Gradient
#: import Window kivy.core.window.Window
#: import Factory kivy.factory.Factory
WindowManager:
    StartUp:
        id: start_up
        name: 'start_up'
    LoginScreen:
        #id: login_screen
        #name: 'login_screen'
    # Forget password
    #ForgetPasswordEmailScreen:
        #id: forget_password_email_screen
        #name: 'forget_password_email_screen'
    #ForgetPasswordOTPScreen:
        #id: forget_password_otp_screen
        #name: 'forget_password_otp_screen'
    #ForgetPasswordNewPassScreen:
        #id: forget_password_new_pass_screen
        #name: 'forget_password_new_pass_screen'
    # Sign up
    #SignUpScreen:
        #id: sign_up_screen
        #name: 'sign_up_screen'
    #SignUpOTPScreen:
        #id: sign_up_otp_screen
        #name: 'sign_up_otp_screen'
    # Main screen
    MasterScreen:
        id: master_screen
        name: 'master_screen'
    #SettingScreen:

<StartUp>:
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    Image:
        id: logo
        source: 'layout/img/logo.png'
        size_hint: 1/3,None
        height: self.width
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        allow_stretch: True
        color: 1,1,1,0

<LoginScreen>:
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.975}

        Label:
            id: welcome
            text: 'WELCOME!'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: welcome2
            text: 'Welcome to a house of indoor plant lovers'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

    FloatLayout: # Authentication
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.5}

        FloatLayout:
            pos_hint: {'center_x':0.5, 'center_y':0.6275}
            Image:
                source: 'layout/img/psswrd.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            MDTextField:
                id: password
                hint_text: 'case sensitive'
                max_text_length: 50
                password: True
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

        FloatLayout:
            pos_hint: {'center_x':0.5,'center_y':0.8875}
            Image:
                source: 'layout/img/usrnm.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                color: 1, 1, 1, 1  # Set image color to full opacity
                allow_stretch: True
            MDTextField:
                id: username
                hint_text: 'username or email'
                max_text_length: 50
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

        Button:
            id: login_button
            name: 'login_button'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'y':0}
            background_color: 0,0,0,0
            on_press:
                root.press_login_animation(self)
                app.play_sound('next.wav')
            on_release:
                root.login(self)
            Image:
                id: login_button_image
                color: 1, 1, 1, 1  # Set image color to full opacity
                source: 'layout/img/login.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            Label:
                id: login_button_text
                text: 'Login'
                color: app.background_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

        Button:
            id: forget_password
            name: 'forget_password'
            text: 'forget password?'
            size_hint: 0.4,0.1
            pos_hint: {'right':1,'center_y':0.4}
            font_size: self.height*0.6
            color: app.secondary_font_color
            background_color: 0,0,0,0
            disabled: False
            on_press:
                root.press_button(self)
                app.play_sound('next2.wav')
            on_release:
                root.release_button(self)
            Image:
                id: forget_password_image
                color: 0,0,0,0  # Set image color to full opacity
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True

        Label:
            id: wrong
            name: 'wrong'
            text: 'username or password incorrect.'
            size_hint: 0.4,0.1
            pos_hint: {'x':0.12,'center_y':0.4}
            font_size: self.height*0.6
            color: 0,0,0,0
            background_color: 0,0,0,0

    Label:
        id: or
        text: 'Or'
        pos_hint: {'center_x': 0.5, 'center_y': 0.4}
        font_size: self.parent.height*0.03
        color: app.secondary_font_color

    Button:
        id: sign_up
        name: 'sign_up'
        text: 'Don\'t have an account? Sign Up'
        size_hint: 0.7,0.05
        pos_hint: {'center_x':0.5,'center_y':0.125}
        font_size: self.height*0.5
        color: app.primary_font_color
        background_color: 0,0,0,0
        on_press:
            root.press_button(self)
            app.play_sound('next2.wav')
        on_release:
            root.release_button(self)
        Image:
            id: sign_up_image
            color: 0,0,0,0  # Set image color to full opacity
            width: self.parent.width
            height: self.parent.height
            center_x: self.parent.center_x
            center_y: self.parent.center_y
            allow_stretch: True

    FloatLayout: # Signin other method
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'center_y':0.175}

        Button:
            id: login_google
            name: 'login_google'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'center_y':0.9}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
                app.play_sound('next2.wav')
            on_release:
                root.release_button(self)
            Image:
                id: login_google_image
                source: 'layout/img/signin_google.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
                allow_stretch: True
            Label:
                id: login_google_text
                text: 'Sign in with Google'
                color: app.secondary_font_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

        Button:
            id: login_facebook
            name: 'login_facebook'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'center_y':0.6}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
                app.play_sound('next2.wav')
            on_release:
                root.release_button(self)
            Image:
                id: login_facebook_image
                source: 'layout/img/signin_facebook.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
                allow_stretch: True
            Label:
                id: login_facebook_text
                text: 'Sign in with Facebook'
                color: app.secondary_font_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

<ForgetPasswordEmailScreen>:
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout: # Back_button_region
        size_hint: 1, 1.15/12
        pos_hint: {'center_x': 0.5, 'top': 1}
        canvas:
            Color:
                rgba: 0, 0, 0, 0
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            id: back_button
            size_hint: None, 0.9/1.25
            width: self.height
            pos_hint: {'center_x': 1.00001/12, 'center_y': 0.5}
            background_color: 0,0,0,0
            on_press:
                app.play_sound('sliding.wav')
                root.press_back(self)
            on_release:
                root.release_back(self)
            Image:
                id: back_button_image
                source: 'layout/img/backbutton.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                width: self.parent.width
                height: self.parent.height
                allow_stretch: True

    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.925}

        Label:
            id: forget_password_title
            text: 'Forget Password?'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: forget_password_title2
            text: 'Enter this so we can send you the reset code'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

    FloatLayout: # Enter email
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.5}

        Button:
            id: next_forget_button
            name: 'next_forget_button'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5, 'center_y':0.6275}
            background_color: 0,0,0,0
            on_press: root.press_next_animation(self)
            on_release:
                root.to_otp(self)
                app.play_sound('next.wav')
            Image:
                id: next_forget_button_image
                color: 1, 1, 1, 1  # Set image color to full opacity
                source: 'layout/img/login.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            Label:
                id: next_forget_button_text
                text: 'Next'
                color: app.background_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

        FloatLayout:
            pos_hint: {'center_x':0.5,'center_y':0.8875}
            Image:
                source: 'layout/img/email.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                color: 1, 1, 1, 1  # Set image color to full opacity
                allow_stretch: True
            MDTextField:
                id: email_forget
                hint_text: 'email account'
                max_text_length: 50
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

        Label:
            id: wrong_email
            name: 'wrong_email'
            text: 'email not found'
            size_hint: 0.4,0.1
            pos_hint: {'x':0.12,'center_y':0.4}
            font_size: self.height*0.6
            color: 0,0,0,0
            background_color: 0,0,0,0

<ForgetPasswordOTPScreen>:
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout: # Back_button_region
        size_hint: 1, 1.15/12
        pos_hint: {'center_x': 0.5, 'top': 1}
        canvas:
            Color:
                rgba: 0, 0, 0, 0
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            id: back_button
            size_hint: None, 0.9/1.25
            width: self.height
            pos_hint: {'center_x': 1.00001/12, 'center_y': 0.5}
            background_color: 0,0,0,0
            on_press:
                app.play_sound('sliding.wav')
                root.press_back(self)
            on_release:
                root.release_back(self)
            Image:
                id: back_button_image
                source: 'layout/img/backbutton.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                width: self.parent.width
                height: self.parent.height
                allow_stretch: True

    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.925}

        Label:
            id: verification_code_title
            text: 'Verification Code'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: verification_code_title2
            text: 'Enter 6-digit code we sent to your email'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

    FloatLayout: # OTP
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.5}

        TextInput:
            id: otp_pass1
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x':1.000001/12,'center_y':0.8875}
            font_size: self.height*0.6
            multiline: False
            disabled : False if otp_pass2.text == '' else True
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            on_text:
                if len(self.text) > 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass2.focus = True

        TextInput:
            id: otp_pass2
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 3/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled : False if otp_pass1.text != '' and otp_pass3.text == '' else True
            on_text:
                if len(self.text) == 0: otp_pass1.focus = True
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass3.focus = True
        TextInput:
            id: otp_pass3
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 5/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled : False if otp_pass2.text != '' and otp_pass4.text == '' else True
            on_text:
                if len(self.text) == 0: otp_pass2.focus = True
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass4.focus = True
        TextInput:
            id: otp_pass4
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 7/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled : False if otp_pass3.text != '' and otp_pass5.text == '' else True
            on_text:
                if len(self.text) == 0: otp_pass3.focus = True
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass5.focus = True
        TextInput:
            id: otp_pass5
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 9/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled: False if otp_pass4.text != '' and otp_pass6.text == '' else True
            on_text:
                if len(self.text) == 0: otp_pass4.focus = True
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass6.focus = True
        TextInput:
            id: otp_pass6
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 11/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled: False if otp_pass5.text != '' else True
            on_text:
                if len(self.text) == 0: otp_pass5.focus = True
                if len(self.text) >= 1: self.text = self.text[0]

        Button:
            id: confirm_otp_button
            name: 'confirm_otp_button'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'center_y':0.6275}
            background_color: 0,0,0,0
            on_press:
                root.press_confirm_animation(self)
                app.play_sound('next.wav')
            on_release: root.to_new_pass(self)
            Image:
                id: confirm_otp_button_image
                source: 'layout/img/login.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: (1, 1, 1, 1)  if otp_pass6.text != '' else (1,1,1,0.5)
                disabled: False if otp_pass6.text != '' else True
            Label:
                id: confirm_otp_button_text
                text: 'Confirm'
                color: app.background_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3
        Label:
            id: wrong_otp
            name: 'wrong_otp'
            text: 'wrong otp'
            size_hint: 0.4,0.1
            pos_hint: {'x':0.12,'center_y':0.4}
            font_size: self.height*0.6
            color: 0,0,0,0
            background_color: 0,0,0,0

    Button:
        id: resend_code
        name: 'resend_code'
        text: 'Didn’t receive the code? Send again'
        size_hint: 0.7,0.05
        pos_hint: {'center_x':0.5,'center_y':0.125}
        font_size: self.height*0.5
        color: app.primary_font_color
        background_color: 0,0,0,0
        on_press:
            root.press_button(self)
            app.play_sound('next2.wav')
        on_release:
            root.release_button(self)
        Image:
            id: resend_code_image
            color: 0,0,0,0  # Set image color to full opacity
            width: self.parent.width
            height: self.parent.height
            center_x: self.parent.center_x
            center_y: self.parent.center_y
            allow_stretch: True

<ForgetPasswordNewPassScreen>
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.975}

        Label:
            id: create_new_pass_title
            text: 'Create New Password'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: create_new_pass_title2
            text: 'Please dont forget it too!'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

    FloatLayout: # New pass
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.5}

        FloatLayout:
            pos_hint: {'center_x':0.5, 'center_y':0.6275}
            Image:
                source: 'layout/img/psswrd.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            MDTextField:
                id: new_password2
                hint_text: 'repeat password'
                max_text_length: 50
                password: True
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10
        FloatLayout:
            pos_hint: {'center_x':0.5,'center_y':0.8875}
            Image:
                source: 'layout/img/psswrd.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            MDTextField:
                id: new_password
                hint_text: 'case sensitive'
                max_text_length: 50
                password: True
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

        Button:
            id: confirm_new_pass_button
            name: 'confirm_new_pass_button'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'y':0}
            background_color: 0,0,0,0
            on_press:
                root.press_confirm_animation(self)
                app.play_sound('next.wav')
            on_release: root.login(self)
            Image:
                id: confirm_new_pass_button_image
                source: 'layout/img/login.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: (1, 1, 1, 1) if new_password.text == new_password2.text else (1,1,1,0.5)
                disabled: False if new_password.text == new_password2.text else True
            Label:
                id: confirm_new_pass_button_text
                text: 'Confirm'
                color: app.background_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3
        Label:
            id: wrong
            name: 'wrong'
            text: 'new password must be different from old'
            size_hint: 0.4,0.1
            pos_hint: {'center_x':0.5,'center_y':0.4}
            font_size: self.height*0.6
            color: 0,0,0,0
            background_color: 0,0,0,0

<SignUpScreen>:
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout: # Signup button
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.2525}
        Button:
            id: sign_up_button
            name: 'sign_up_button'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5, 'center_y':0.6275}
            background_color: 0,0,0,0
            on_press:
                root.press_signup_animation(self)
                app.play_sound('next.wav')
            on_release: root.signup(self)
            Image:
                id: sign_up_button_image
                source: 'layout/img/login.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: (1, 1, 1, 1)  if password_sign_up.text == password_sign_up2.text else (1,1,1,0.5)
                disabled: False if password_sign_up.text == password_sign_up2.text else True
            Label:
                id: sign_up_button_text
                text: 'Sign up'
                color: app.background_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3
        Label:
            id: wrong
            name: 'wrong'
            text: 'username already exist'
            size_hint: 0.4,0.1
            pos_hint: {'center_x':0.5,'center_y':0.4}
            font_size: self.height*0.6
            color: 0,0,0,0
            background_color: 0,0,0,0

    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.975}

        Label:
            id: welcome_sign_up
            text: 'WELCOME!'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: welcome_sign_up2
            text: 'You can start using the app after sign up'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

    FloatLayout: # Signup
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.5}

        FloatLayout:
            pos_hint: {'center_x':0.5, 'center_y':0.1125}
            Image:
                source: 'layout/img/psswrd.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            MDTextField:
                id: password_sign_up2
                hint_text: 'repeat password'
                max_text_length: 50
                password: True
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

        FloatLayout:
            pos_hint: {'center_x':0.5, 'center_y':0.3725}
            Image:
                source: 'layout/img/psswrd.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            MDTextField:
                id: password_sign_up
                hint_text: 'password'
                max_text_length: 50
                password: True
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

        FloatLayout:
            pos_hint: {'center_x':0.5, 'center_y':0.6275}
            Image:
                source: 'layout/img/email.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
            MDTextField:
                id: email_sign_up
                hint_text: 'email account'
                max_text_length: 50
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10
        FloatLayout:
            pos_hint: {'center_x':0.5,'center_y':0.8875}
            Image:
                source: 'layout/img/usrnm.png'
                size_hint: 1,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                color: 1, 1, 1, 1  # Set image color to full opacity
                allow_stretch: True
            MDTextField:
                id: username_sign_up
                hint_text: 'username'
                max_text_length: 50
                size_hint: 0.7,None
                height: self.width/6
                pos_hint: {'center_x':0.5,'center_y':0.5}
                text_size: self.size
                font_size: self.width/10

    Button:
        id: sign_in
        name: 'sign_in'
        text: 'Already have an account? Sign in'
        size_hint: 0.7,0.05
        pos_hint: {'center_x':0.5,'center_y':0.125}
        font_size: self.height*0.5
        color: app.primary_font_color
        background_color: 0,0,0,0
        on_press:
            root.press_button(self)
            app.play_sound('next2.wav')
        on_release:
            root.release_button(self)
        Image:
            id: sign_in_image
            color: 0,0,0,0  # Set image color to full opacity
            width: self.parent.width
            height: self.parent.height
            center_x: self.parent.center_x
            center_y: self.parent.center_y
            allow_stretch: True

    FloatLayout: # Signin other method
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'center_y':0.175}

        Button:
            id: login_google
            name: 'login_google'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'center_y':0.9}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
                app.play_sound('next2.wav')
            on_release:
                root.release_button(self)
            Image:
                id: login_google_image
                source: 'layout/img/signin_google.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
                allow_stretch: True
            Label:
                id: login_google_text
                text: 'Sign in with Google'
                color: app.secondary_font_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

        Button:
            id: login_facebook
            name: 'login_facebook'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'center_y':0.6}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
                app.play_sound('next2.wav')
            on_release:
                root.release_button(self)
            Image:
                id: login_facebook_image
                source: 'layout/img/signin_facebook.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
                allow_stretch: True
            Label:
                id: login_facebook_text
                text: 'Sign in with Facebook'
                color: app.secondary_font_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3

<SignUpOTPScreen>:
    canvas:
        Color:
            rgba: app.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout: # Back_button_region
        size_hint: 1, 1.15/12
        pos_hint: {'center_x': 0.5, 'top': 1}
        canvas:
            Color:
                rgba: 0, 0, 0, 0
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            id: back_button
            size_hint: None, 0.9/1.25
            width: self.height
            pos_hint: {'center_x': 1.00001/12, 'center_y': 0.5}
            background_color: 0,0,0,0
            on_press:
                app.play_sound('sliding.wav')
                root.press_back(self)
            on_release:
                root.release_back(self)
            Image:
                id: back_button_image
                source: 'layout/img/backbutton.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                width: self.parent.width
                height: self.parent.height
                allow_stretch: True

    FloatLayout: # Title
        size_hint: None,0.12
        width: self.height*4
        pos_hint: {'x': 0.075, 'top': 0.925}

        Label:
            id: verification_code_title
            text: 'Verification Code'
            color: app.primary_font_color
            pos_hint: {'x': 0, 'center_y': 1}
            text_size: self.size
            font_size: self.parent.height*0.25
            bold: True
        Label:
            id: verification_code_title2
            text: 'Enter 6-digit code we sent to your email'
            color: app.secondary_font_color
            pos_hint: {'x': 0, 'y': 0.25}
            text_size: self.size
            font_size: self.parent.height*0.15

    FloatLayout: # OTP
        size_hint: None, 0.32
        width: self.height*1.35
        pos_hint: {'center_x':0.5,'y':0.5}

        TextInput:
            id: otp_pass1
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x':1.000001/12,'center_y':0.8875}
            font_size: self.height*0.6
            multiline: False
            disabled : False if otp_pass2.text == '' else True
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            on_text:
                if len(self.text) > 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass2.focus = True

        TextInput:
            id: otp_pass2
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 3/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled : False if otp_pass1.text != '' and otp_pass3.text == '' else True
            on_text:
                if len(self.text) == 0: otp_pass1.focus = True
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass3.focus = True
        TextInput:
            id: otp_pass3
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 5/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled : False if otp_pass2.text != '' and otp_pass4.text == '' else True
            on_text:
                if len(self.text) == 0: otp_pass2.focus = True
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass4.focus = True
        TextInput:
            id: otp_pass4
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 7/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled : False if otp_pass3.text != '' and otp_pass5.text == '' else True
            on_text:
                if len(self.text) == 0: otp_pass3.focus = True
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass5.focus = True
        TextInput:
            id: otp_pass5
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 9/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled: False if otp_pass4.text != '' and otp_pass6.text == '' else True
            on_text:
                if len(self.text) == 0: otp_pass4.focus = True
                if len(self.text) >= 1: self.text = self.text[0]
                if len(self.text) >= 1: otp_pass6.focus = True
        TextInput:
            id: otp_pass6
            input_filter: 'int'
            size_hint: 0.9/6,None
            height: self.width
            pos_hint: {'center_x': 11/12,'center_y':0.8875}
            font_size: self.height*0.6
            cursor_color: 0.1843, 0.6549, 0.8313, .5
            multiline: False
            disabled: False if otp_pass5.text != '' else True
            on_text:
                if len(self.text) == 0: otp_pass5.focus = True
                if len(self.text) >= 1: self.text = self.text[0]

        Button:
            id: confirm_otp_button
            name: 'confirm_otp_button'
            size_hint: 1,None
            height: self.width/6
            pos_hint: {'center_x':0.5,'center_y':0.6275}
            background_color: 0,0,0,0
            on_press:
                root.press_confirm_animation(self)
                app.play_sound('next.wav')
            on_release: root.to_master_screen(self)
            Image:
                id: confirm_otp_button_image
                source: 'layout/img/login.png'
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: (1, 1, 1, 1)  if otp_pass6.text != '' else (1,1,1,0.5)
                disabled: False if otp_pass6.text != '' else True
            Label:
                id: confirm_otp_button_text
                text: 'Confirm'
                color: app.background_color
                width: self.parent.width
                height: self.parent.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                font_size: self.height/3
        Label:
            id: wrong_otp
            name: 'wrong_otp'
            text: 'wrong otp'
            size_hint: 0.4,0.1
            pos_hint: {'x':0.12,'center_y':0.4}
            font_size: self.height*0.6
            color: 0,0,0,0
            background_color: 0,0,0,0

    Button:
        id: resend_code
        name: 'resend_code'
        text: 'Didn’t receive the code? Send again'
        size_hint: 0.7,0.05
        pos_hint: {'center_x':0.5,'center_y':0.125}
        font_size: self.height*0.5
        color: app.primary_font_color
        background_color: 0,0,0,0
        on_press:
            root.press_button(self)
            app.play_sound('next2.wav')
        on_release:
            root.release_button(self)
        Image:
            id: resend_code_image
            color: 0,0,0,0  # Set image color to full opacity
            width: self.parent.width
            height: self.parent.height
            center_x: self.parent.center_x
            center_y: self.parent.center_y
            allow_stretch: True

<MasterScreen>:
    FloatLayout:
        canvas:
            Rectangle:
                pos: self.pos
                size: self.size
                source: 'layout/img/background.png'
        #VideoPlayer:
            #id: background_video
            #source: 'layout/img/plant.mp4'
            #state: 'play'
            #options: {'eos': 'loop'}
            #allow_stretch: True
            #allow_fullscreen: False
    Button:
        id: swipe
        background_color: 0,0,0,0
        on_press: root.swipe_home_buttons(self)
    MainPagesManager:
        id: main_pages
        name: 'main_pages'
    UtilityBars:
        id:utility_bars
        name: 'utility_bars'

<MainPagesManager>:
    HomePage:
        id: home_page
        name: 'home_page'
    PlantProfilePage:
        id: plant_profile_page
        name: 'plant_profile_page'
    CalendarPage:
        id: calendar_page
        name: 'calendar_page'
    CommunityPage:
        id: community_page
        name: 'community_page'
    WikiPage:
        id: wiki_page
        name: 'wiki_page'
    ShoppingPage:
        id: shopping_page
        name: 'shopping_page'

<HomePage>:
    Label:
        id:current_time
        size_hint: None,0.1
        width: self.height*4
        pos_hint: {'center_x': 0.5, 'center_y': 0.83}
        text: app.now
        color: app.primary_font_color
        valign: 'center'
        halign: 'center'
        text_size: self.size
        font_size: self.height
    Label:
        id:current_date
        size_hint: None,0.1
        width: self.height*4
        pos_hint: {'center_x': 0.5, 'center_y': 0.77}
        text: app.today
        color: app.primary_font_color
        valign: 'center'
        halign: 'center'
        text_size: self.size
        font_size: self.height*0.3
        bold: True




    #Button:
        #text: 'home page'
        #size_hint: 0.8,0.25
        #pos_hint: {'center_x': 0.5, 'center_y':0.5}
        #background_color: 0,0,0,0.5
        #on_release: root.test(self)
        #collide_children: False

<Test>:
    canvas:
        Color:
            rgba: 1,1,0,1
        Rectangle:
            size: self.size
            pos: self.pos


<PlantSelector>:
    callable_id: ''
    name: ''
    represent_color: 0,0,0,0
    avatar: ''
    next_action: ''
    size_hint: 1,None

    Button:
        size_hint: 1,1
        pos_hint: {'center_x': 0.5, 'center_y':0.5}
        background_down: 'layout/img/white_blank.png'
        background_normal: 'layout/img/white_blank.png'
        background_color: 0,0,0,0
        on_press:
            app.play_sound('next.wav')
            root.press_button(self)
        on_release:
            root.release_button(self)

    FloatLayout:
        size_hint: 1,1
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        canvas:
            Color:
                rgba: root.represent_color
            Line:
                width: self.height/50
                circle:(self.center_x*0.3, self.center_y, self.height*0.7/2)

    FitImage:
        source: root.avatar
        size_hint: None,None
        mipmap:True
        height: self.parent.height*0.6
        width: self.height
        pos_hint: {'center_x':0.15, 'center_y':0.5}
        radius: self.height/2, self.height/2, self.height/2, self.height/2

    FloatLayout:
        canvas:
            Color:
                rgba: 0.5,0.5,0.5,0.5
            Rectangle:
                size:self.size
                pos: self.pos
        size_hint: 1,None
        height: self.parent.height/100
        pos_hint: {'y':0}

<CancelNewPlantPopup>:
    auto_dismiss: False
    size_hint: 0.8,0.2
    pos_hint: {'center_x': 0.5, 'y': 0.5}
    background: 'layout/img/white_blank.png'
    background_color: app.background_color
    title: 'Are you sure you want to quit creation?'
    title_align: 'center'
    title_color: app.primary_font_color
    title_size: self.height/7
    separator_color: 0.5,0.5,0.5,0.25
    FloatLayout:
        size_hint: 1,1
        pos_hint: {'center_x':0.5, 'center_y':0.5}

        # line decorator
        FloatLayout:
            size_hint: None, 1
            width: '2dp'
            pos_hint: {'center_x':0.5, 'y':0}
            canvas:
                Color:
                    rgba: 0.5,0.5,0.5,0.25
                Rectangle:
                    size: self.size
                    pos: self.pos
        Button:
            size_hint: 0.5,1
            pos_hint: {'right':0.5, 'y':0}
            text: 'cancel'
            color: app.primary_font_color
            bold: True
            text_size: self.size
            valign: 'center'
            halign: 'center'
            font_size: self.height/2
            background_color: 0,0,0,0
            on_press:
                app.play_sound('sliding.wav')
                root.press_button(self)
            on_release:
                root.release_button(self)
                root.dismiss()
        Button:
            size_hint: 0.5,1
            pos_hint: {'x':0.5, 'y':0}
            text: 'quit'
            bold: True
            color: app.wrong_pass_warn
            text_size: self.size
            valign: 'center'
            halign: 'center'
            font_size: self.height/2
            background_color: 0,0,0,0
            on_press:
                app.play_sound('sliding.wav')
                root.press_button(self)
            on_release:
                root.release_button(self)
                root.quit_create(self)

<PlantColorPickerPopUp>:
    auto_dismiss: False
    size_hint: 1,0.8
    pos_hint: {'center_x': 0.5, 'y': 1.15/12}
    background: 'layout/img/white_blank.png'
    background_color: app.background_color
    title: 'Pick a color to represent your plant'
    title_align: 'center'
    title_color: app.primary_font_color
    title_size: self.height/30
    separator_color: 0.5,0.5,0.5,0.25
    FloatLayout:
        size_hint: 1,1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        FloatLayout:
            size_hint: 1,0.8
            pos_hint: {'center_x': 0.5, 'top': 1}
            canvas:
                Color:
                    rgba: 0,0,0,1
                Rectangle:
                    size: self.size
                    pos: self.pos
            ColorPicker:
                id: color_picker
                size_hint: 1,1
                pos_hint: {'center_x': 0.5, 'top': 1}
                color: 0,0,0,0
        FloatLayout:
            size_hint: 1,0.2
            pos_hint: {'center_x': 0.5, 'y': 0}
            # line decorator
            FloatLayout:
                size_hint: None, 1
                width: '2dp'
                pos_hint: {'center_x':0.5, 'y':0}
                canvas:
                    Color:
                        rgba: 0.5,0.5,0.5,0.25
                    Rectangle:
                        size: self.size
                        pos: self.pos
            Button:
                size_hint: 0.5,1
                pos_hint: {'right':0.5, 'y':0}
                text: 'cancel'
                bold: True
                color: app.primary_font_color
                text_size: self.size
                valign: 'center'
                halign: 'center'
                font_size: self.height/4
                background_color: 0,0,0,0
                on_press:
                    app.play_sound('sliding.wav')
                    root.press_button(self)
                on_release:
                    root.release_button(self)
                    root.dismiss()
            Button:
                size_hint: 0.5,1
                pos_hint: {'x':0.5, 'y':0}
                text: 'apply'
                color: app.wrong_pass_warn
                text_size: self.size
                bold: True
                valign: 'center'
                halign: 'center'
                font_size: self.height/4
                background_color: 0,0,0,0
                on_press:
                    app.play_sound('next.wav')
                    root.press_button(self)
                on_release:
                    root.release_button(self)
                    root.apply_color(self)

<YearButton>:
    size_hint: 1,None
    pos_hint: {'center_x':0.5}
    valign: 'center'
    halign: 'center'
    background_down: 'layout/img/white_blank.png'
    background_normal: 'layout/img/white_blank.png'
    background_color: app.background_color
    text_size: self.size
    color: app.primary_font_color
    font_size: self.height/3
    on_press:
        app.play_sound('search.wav')
        root.press_button(self)
    on_release:
        root.release_button(self)

<PlantYearSelectionPopup>:
    id: popup
    auto_dismiss: True
    size_hint: 0.5, 0.8
    pos_hint: {'x': 0.4, 'y': 1.15/12}
    background: 'layout/img/white_blank.png'
    background_color: app.background_color
    title: 'Pick a year'
    title_align: 'center'
    title_color: app.primary_font_color
    title_size: self.height/30
    separator_color: 0.5,0.5,0.5,0.25
    FloatLayout:
        size_hint: 1,1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        canvas:
            Color:
                rgba: 0,0,0,1
            Rectangle:
                size: self.size
                pos: self.pos
        ScrollView:
            id: scroll_view
            size_hint: 1,1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            BoxLayout:
                id: year_display
                size_hint: 1,None
                height: self.minimum_height
                orientation: 'vertical'


<NewPlantScreen>:
    represent_color: 0,0,0,0
    FloatLayout:
        size_hint: 1,1
        pos_hint: {'center_y':0.35}
        canvas:
            Color:
                rgba: app.background_color
            RoundedRectangle:
                pos: self.pos
                size: self.size
        Image:
            size_hint: None, 0.03
            width: self.height*2
            pos_hint: {'center_x': 0.5, 'center_y': 0.975}
            source: 'layout/img/two_dash.png'
            color: app.primary_font_color
            allow_stretch: True
        Button:
            size_hint: 0.25,0.05
            pos_hint: {'right': 0.95, 'top': 1}
            text: 'cancel'
            color: app.wrong_pass_warn
            valign: 'center'
            halign: 'center'
            text_size: self.size
            font_size: self.height*0.6
            background_color: 0,0,0,0
            on_press:
                app.play_sound('search.wav')
                root.press_cancel_button(self)
            on_release:
                Factory.CancelNewPlantPopup().open()
                root.release_cancel_button(self)

        ScrollView:
            id: scroll_view
            size_hint: 1, float(0.95-0.15-1.15/12)
            pos_hint: {'center_x':0.5,'top':0.95}
            bar_color: 0,0,0,0
            bar_inactive_color: 0,0,0,0
            BoxLayout:
                size_hint: 1,None
                height: self.minimum_height
                pos_hint: {'top': 1}
                orientation: 'vertical'

                # Titles
                FloatLayout:
                    size_hint: 1,None
                    height: self.parent.parent.height*0.146
                    Label:
                        size_hint: 0.5,0.75
                        pos_hint: {'center_x': 0.5, 'top':1}
                        text: 'Create'
                        color: app.primary_font_color
                        halign: 'center'
                        valign: 'center'
                        text_size: self.size
                        font_size: self.height*0.6
                        bold: True
                    Label:
                        size_hint: 1,0.35
                        pos_hint: {'center_x': 0.5, 'y':0.05}
                        text: 'Let\'s add a new plant to your garden!'
                        color: app.secondary_font_color
                        halign: 'center'
                        valign: 'center'
                        text_size: self.size
                        font_size: self.height*0.6
                    FloatLayout:
                        size_hint: 1, None
                        height: '2dp'
                        pos_hint: {'center_x':0.5, 'y':0}
                        canvas:
                            Color:
                                rgba: 0.5,0.5,0.5,0.25
                            Rectangle:
                                size: self.size
                                pos: self.pos

                # Color wheel and avatar
                FloatLayout:
                    size_hint: 1,None
                    height: self.parent.parent.height*0.6
                    # auto detect specie (the title)
                    FloatLayout:
                        size_hint: None,None
                        height: scroll_view.height/20
                        width: self.height*13
                        pos_hint: {'x':0.1, 'top': 0.95}
                        MDLabel:
                            size_hint: 0.9, 1
                            pos_hint: {'x': 0.1, 'center_y':0.5}
                            text: 'AVATAR/AUTO-DETECT'
                            bold: True
                            font_style: 'Caption'
                            color: app.primary_background_color
                            halign: 'left'
                            valign: 'center'
                            text_size: self.size
                            font_size: self.height*0.75
                        Button:
                            disabled: True
                            size_hint: None, 1
                            width: self.height
                            pos_hint: {'x': 0, 'center_y': 0.5}
                            background_color: 0,0,0,0
                            Image:
                                size_hint: None,None
                                width: self.parent.width
                                height: self.parent.height
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y
                                source: 'layout/img/camera.png'
                                allow_stretch: True
                                color: app.primary_background_color
                    FloatLayout:
                        size_hint: None, 1
                        width: self.height*1.5
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        # color wheel
                        Image:
                            id: color_wheel
                            size_hint: None, 0.7
                            width: self.height
                            pos_hint: {'center_x': 0.5, 'center_y': 0.45}
                            source: 'layout/img/color_wheel.png'
                            allow_stretch: True
                            color: root.represent_color
                        FitImage:
                            id: color_wheel
                            size_hint: None, 0.6
                            width: self.height
                            pos_hint: {'center_x': 0.5, 'center_y': 0.45}
                            source: 'layout/img/default_plant_avatar.png'
                            allow_stretch: True
                            radius: self.height/2, self.height/2, self.height/2, self.height/2
                        Button:
                            id: plant_avatar_picker
                            name: 'plant_avatar_picker'
                            size_hint: None, 0.15
                            width: self.height
                            pos_hint: {'center_x': 0.5, 'center_y': 0.45}
                            background_color: 0,0,0,0
                            on_press:
                                app.play_sound('search.wav')
                                root.press_button(self)
                            on_release:
                                root.release_button(self)
                            Image:
                                id: plant_avatar_picker_image
                                size_hint: None,None
                                width: self.parent.width
                                height: self.parent.height
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y
                                source: 'layout/img/camera.png'
                                allow_stretch: True
                                color: app.primary_font_color
                        # color picker
                        Image:
                            id: plant_represent_color
                            size_hint: 0.03,0.6
                            pos_hint: {'center_x': 0.8,'center_y': 0.5}
                            source: ''
                            allow_stretch: True
                            color: root.represent_color
                        Button:
                            id: color_picker
                            name: 'color_picker'
                            size_hint: None, 0.075
                            width: self.height
                            pos_hint: {'center_x': 0.8, 'y': 0.1}
                            background_color: 0,0,0,0
                            on_press:
                                app.play_sound('search.wav')
                                root.press_button(self)
                            on_release:
                                Factory.PlantColorPickerPopUp().open()
                                root.release_button(self)
                            Image:
                                id: plant_color_picker_image
                                size_hint: None,None
                                width: self.parent.width
                                height: self.parent.height
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y
                                source: 'layout/img/color_picker.png'
                                allow_stretch: True
                                color: 0.5,0.5,0.5,0.5
                    # line separator
                    FloatLayout:
                        size_hint: 1, None
                        height: '2dp'
                        pos_hint: {'center_x':0.5, 'y':0}
                        canvas:
                            Color:
                                rgba: 0.5,0.5,0.5,0.25
                            Rectangle:
                                size: self.size
                                pos: self.pos
                # info input
                FloatLayout:
                    size_hint: 1,None
                    height: self.parent.parent.height*0.18

                    # manual input specie (the title)
                    FloatLayout:
                        size_hint: None,None
                        height: scroll_view.height/20
                        width: self.height*13
                        pos_hint: {'x':0.1, 'top': 0.95}
                        MDLabel:
                            size_hint: 0.9, 1
                            pos_hint: {'x': 0.1, 'center_y':0.5}
                            text: 'MANUAL-INPUT SPECIE'
                            bold: True
                            font_style: 'Caption'
                            color: app.primary_background_color
                            halign: 'left'
                            valign: 'center'
                            text_size: self.size
                            font_size: self.height*0.75
                        Button:
                            disabled: True
                            size_hint: None, 1
                            width: self.height
                            pos_hint: {'x': 0, 'center_y': 0.5}
                            background_color: 0,0,0,0
                            Image:
                                size_hint: None,None
                                width: self.parent.width
                                height: self.parent.height
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y
                                source: 'layout/img/manual_input.png'
                                allow_stretch: True
                                color: app.primary_background_color

                        MDSwitch:
                            id: toggle_manual
                            width: self.parent.height*2
                            pos_hint: {'x':0.75, 'center_y': 0.5}
                            track_color_active: app.secondary_background_color
                            thumb_color_active: app.secondary_background_color
                            thumb_color_inactive: 'lightgrey'

                    MDTextField:
                        id: manual_input_text
                        max_text_length: 50
                        size_hint: 0.8, None
                        height: self.parent.height/2
                        mode: 'round'
                        valign: 'center'
                        text_color_focus: app.primary_font_color
                        line_color_focus: app.primary_background_color
                        text_color_normal: app.primary_font_color
                        pos_hint: {'center_x':0.5,'y': 0.1}
                        opacity: 1 if toggle_manual.active else 0.2
                        disabled: False if toggle_manual.active else True
                        text_size: self.size
                        font_size: Window.size[1]*0.03
                        hint_text: 'name of plant'

                    # line separator
                    FloatLayout:
                        size_hint: 1, None
                        height: '2dp'
                        pos_hint: {'center_x':0.5, 'y':0}
                        canvas:
                            Color:
                                rgba: 0.5,0.5,0.5,0.25
                            Rectangle:
                                size: self.size
                                pos: self.pos

                # more info input (location, age, extra note)
                # age (optional)
                FloatLayout:
                    size_hint: 1,None
                    height: self.parent.parent.height*0.18
                    FloatLayout:
                        size_hint: None,None
                        height: scroll_view.height/20
                        width: self.height*13
                        pos_hint: {'x':0.1, 'top': 0.95}
                        MDLabel:
                            size_hint: 0.9, 1
                            pos_hint: {'x': 0.1, 'center_y':0.5}
                            text: 'AGE in YEAR (OPTIONAL)'
                            bold: True
                            font_style: 'Caption'
                            color: app.primary_background_color
                            halign: 'left'
                            valign: 'center'
                            text_size: self.size
                            font_size: self.height*0.75
                        Button:
                            disabled: True
                            size_hint: None, 1
                            width: self.height
                            pos_hint: {'x': 0, 'center_y': 0.5}
                            background_color: 0,0,0,0
                            Image:
                                size_hint: None,None
                                width: self.parent.width
                                height: self.parent.height
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y
                                source: 'layout/img/age.png'
                                allow_stretch: True
                                color: app.primary_background_color

                    MDTextField:
                        id: age_text
                        size_hint: 0.5, None
                        disabled: True
                        height: self.parent.height/2
                        mode: 'round'
                        halign: 'center'
                        valign: 'center'
                        text_color_normal: app.primary_font_color
                        pos_hint: {'x':0.1,'y': 0.1}
                        text_size: self.size
                        font_size: Window.size[1]*0.03
                    Button:
                        id: set_age
                        size_hint: None, None
                        height: self.parent.height/2
                        width: self.height
                        pos_hint: {'x': 0.65, 'y': 0.1}
                        background_color: 0,0,0,0
                        on_press:
                            app.play_sound('search.wav')
                            root.press_button(self)
                        on_release:
                            Factory.PlantYearSelectionPopup().open()
                            root.release_button(self)
                        Image:
                            id: set_age_image
                            size_hint: None,None
                            width: self.parent.width
                            height: self.parent.height
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            source: 'layout/img/arrow_up.png'
                            allow_stretch: True
                            color: app.primary_background_color

                    # line separator
                    FloatLayout:
                        size_hint: 1, None
                        height: '2dp'
                        pos_hint: {'center_x':0.5, 'y':0}
                        canvas:
                            Color:
                                rgba: 0.5,0.5,0.5,0.25
                            Rectangle:
                                size: self.size
                                pos: self.pos

                # location (optional)
                FloatLayout:
                    size_hint: 1,None
                    height: self.parent.parent.height*0.18
                    FloatLayout:
                        size_hint: None,None
                        height: scroll_view.height/20
                        width: self.height*13
                        pos_hint: {'x':0.1, 'top': 0.95}
                        MDLabel:
                            size_hint: 0.9, 1
                            pos_hint: {'x': 0.1, 'center_y':0.5}
                            text: 'LOCATION (OPTIONAL)'
                            bold: True
                            font_style: 'Caption'
                            color: app.primary_background_color
                            halign: 'left'
                            valign: 'center'
                            text_size: self.size
                            font_size: self.height*0.75
                        Button:
                            disabled: True
                            size_hint: None, 1
                            width: self.height
                            pos_hint: {'x': 0, 'center_y': 0.5}
                            background_color: 0,0,0,0
                            Image:
                                size_hint: None,None
                                width: self.parent.width
                                height: self.parent.height
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y
                                source: 'layout/img/location.png'
                                allow_stretch: True
                                color: app.primary_background_color

                    MDTextField:
                        id: location_text
                        max_text_length: 50
                        size_hint: 0.8, None
                        height: self.parent.height/2
                        mode: 'round'
                        valign: 'center'
                        text_color_focus: app.primary_font_color
                        line_color_focus: app.primary_background_color
                        text_color_normal: app.primary_font_color
                        pos_hint: {'center_x':0.5,'y': 0.1}
                        text_size: self.size
                        font_size: Window.size[1]*0.03
                        hint_text: 'your country (and city)'

                    # line separator
                    FloatLayout:
                        size_hint: 1, None
                        height: '2dp'
                        pos_hint: {'center_x':0.5, 'y':0}
                        canvas:
                            Color:
                                rgba: 0.5,0.5,0.5,0.25
                            Rectangle:
                                size: self.size
                                pos: self.pos

                # Extra notes (optional)
                FloatLayout:
                    size_hint: 1,None
                    height: self.parent.parent.height*0.4
                    FloatLayout:
                        size_hint: None,None
                        height: scroll_view.height/20
                        width: self.height*13
                        pos_hint: {'x':0.1, 'top': 0.95}
                        MDLabel:
                            size_hint: 0.9, 1
                            pos_hint: {'x': 0.1, 'center_y':0.5}
                            text: 'EXTRA NOTES (OPTIONAL)'
                            bold: True
                            font_style: 'Caption'
                            color: app.primary_background_color
                            halign: 'left'
                            valign: 'center'
                            text_size: self.size
                            font_size: self.height*0.75
                        Button:
                            disabled: True
                            size_hint: None, 1
                            width: self.height
                            pos_hint: {'x': 0, 'center_y': 0.5}
                            background_color: 0,0,0,0
                            Image:
                                size_hint: None,None
                                width: self.parent.width
                                height: self.parent.height
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y
                                source: 'layout/img/age.png'
                                allow_stretch: True
                                color: app.primary_background_color

                    ScrollView:
                        size_hint: 1, None
                        height: self.parent.height*0.65
                        pos_hint: {'center_x':0.5,'y': 0.1}
                        BoxLayout:
                            size_hint: 1, None
                            height: self.minimum_height
                            pos_hint: {'center_x':0.5}
                            padding: self.width*0.1
                            MDTextField:
                                id: extra_notes_text
                                max_text_length: 200
                                size_hint: 1, None
                                pos_hint: {'center_x':0.5}
                                mode: 'fill'
                                text_color_focus: app.primary_font_color
                                line_color_focus: app.primary_background_color
                                text_color_normal: app.primary_font_color
                                multiline: True
                                text_size: self.size
                                font_size: Window.size[1]*0.03
                                hint_text: 'e.g: how busy you are\nthis will help personalize schedules'
                                hint_text_color_focus: 1,1,1,0
                    # line separator
                    FloatLayout:
                        size_hint: 1, None
                        height: '2dp'
                        pos_hint: {'center_x':0.5, 'y':0}
                        canvas:
                            Color:
                                rgba: 0.5,0.5,0.5,0.25
                            Rectangle:
                                size: self.size
                                pos: self.pos


<PlantProfilePage>:
    id: plant_profile_page
    # background
    FloatLayout:
        canvas:
            Rectangle:
                pos: self.pos
                size: self.size
                texture: Gradient.vertical(app.secondary_background_color, app.secondary_background_color_fade)
        size_hint: 1, 0.2
        pos_hint: {'y':0.8}
    FloatLayout:
        canvas:
            Color:
                rgba: app.secondary_background_color
            Rectangle:
                pos: self.pos
                size: self.size
        size_hint: 1, 0.8
        pos_hint: {'y':0}

    Button:
        id: overlay2
        disabled: True
        background_disabled_normal: ''
        background_color: 0,0,0,0
    #----------------------------------------------------------------------------
    BoxLayout: # text
        size_hint: 0.8,1/12
        pos_hint: {'center_x':0.5, 'top':11/12}
        MDLabel:
            id: garden
            text: 'GARDEN'
            color: app.primary_font_color
            halign: 'center'
            font_size: self.parent.height/2
            bold: True
    FloatLayout: # Search bar
        size_hint: 0.9, 0.06
        pos_hint: {'center_x':0.5,'top':10/12}

        Button: # filter button
            id: filter_button
            name:'filter_button'
            content: ''
            size_hint: (None,0.75)
            width: self.height
            pos_hint: {'x':0,'center_y':0.5}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
                app.play_sound('search.wav')
            on_release:
                root.release_button(self)
                root.load_filter_selector(self)
            Image:
                id: filter_button_image
                source: 'layout/img/filter.png'
                size: self.parent.size
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity

        FloatLayout:
            canvas:
                Color:
                    rgba: 0.9,0.9,0.9,1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
            size_hint: 0.75,1
            pos_hint: {'center_x':0.5, 'center_y':0.5}
            MDTextField:
                id: search_bar
                max_text_length: 50
                size_hint: None,None
                height: self.parent.height
                width: self.parent.width*0.9
                text_color_focus: app.primary_background_color
                line_color_focus: app.primary_background_color
                pos_hint: {'center_x':0.5,'center_y':0.6}
                text_size: self.size
                font_size: self.height/3
        Button: # search_button
            id:search_button
            name: 'search_button'
            size_hint: (None,0.75)
            width: self.height
            pos_hint: {'right':1,'center_y':0.5}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
                app.play_sound('search.wav')
            on_release:
                root.release_button(self)
                root.start_crawling(self)
            Image:
                id: search_button_image
                source: 'layout/img/search.png'
                size: self.parent.size
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity

    ScreenManager: # contain profile page and page for new plant item
        id: profile_and_add
        Screen:
            on_enter: overlay.canvas.clear()
            id: profile_display
            name: 'profile_display'
            ScreenManager: # switch between normal and chat mode
                id: normal_and_chat
                Screen:
                    id: normal_profile
                    name: 'normal_profile'

                    # scroll view------------------------------------------------
                    FloatLayout: # scrollview background
                        canvas:
                            Color:
                                rgba: app.background_color
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        size_hint: 1, 1
                        pos_hint: {'center_x':0.5,'top':0.75}
                    FloatLayout:
                        canvas:
                            Rectangle:
                                pos: self.pos
                                size: self.size
                                texture: Gradient.vertical((0,0,0,0), (0,0,0,0.1))
                        size_hint: 1, 0.1/12
                        pos_hint: {'top':0.75}
                    ScrollView:
                        id: profile_display_box_scrollview
                        size_hint: 1, float(0.75-1.15/12)
                        pos_hint: {'center_x':0.5,'top':0.75}
                        bar_color: 0,0,0,0
                        bar_inactive_color: 0,0,0,0
                        BoxLayout:
                            id: profile_display_box
                            size_hint: 1,None
                            height: self.minimum_height
                            pos_hint: {'top': 1}
                            orientation: 'vertical'

                Screen
                    id: chat_profile
                    name: 'chat_profile'

            MDIconButton: # add new plant button
                size_hint: None,0.1
                width: self.height
                pos_hint: {"center_x": 0.85, "y": 1.5/12}
                icon: 'seed-plus'
                icon_color: app.primary_background_color
                icon_size: self.height*0.7
                md_bg_color: app.highlight_button
                on_press: app.play_sound('search.wav')
                on_release: root.add_new_plant(self)
            FloatLayout:
                id: overlay
                canvas:
                    Color:
                        rgba: 0,0,0,0
                    Rectangle:
                        pos: self.pos
                        size: self.size
        NewPlantScreen:
            id: new_plant_screen
            name: 'new_plant_screen'

<CalendarPage>:
    Image:
        source: 'layout/img/calendar.png'
        keep_ratio: True
        color: 1, 1, 1, 1  # Set image color to full opacity

<CommunityPage>:
    Image:
        source: 'layout/img/community.png'
        keep_ratio: True
        color: 1, 1, 1, 1  # Set image color to full opacity

<SearchResult>: # list of results
    on_press: app.play_sound('next.wav')
    on_release: root.open_search_item(self)
    IconLeftWidgetWithoutTouch:
        id: icon
        icon: 'settings-helper'
        icon_color: app.primary_background_color
        icon_size: self.height*0.65
<SearchItemScreen>: # chosen item in the results
    FloatLayout:
        canvas:
            Color:
                rgba: app.secondary_background_color
            Rectangle:
                pos: self.pos
                size: self.size
        size_hint: 1,0.75
        pos_hint: {'center_x':0.5, 'y':1.15/12}
        ScrollView:
            id: scroll_view
            size_hint: 0.9,1
            pos_hint:{'center_x':0.5, 'y':0}
            bar_color: 0,0,0,0
            bar_inactive_color: 0,0,0,0
            BoxLayout:
                canvas:
                    Color:
                        rgba: 1,1,1,0.2
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                size_hint: 1, None
                spacing: 10
                height: self.minimum_height

                MDLabel:
                    id: info
                    size_hint: 1,None
                    height: self.texture_size[1]
                    pos_hint: {'x':0}
                    text: ''
                    valign: 'top'
                    color: app.primary_font_color
                    text_size: (self.width*0.9,None)
                    font_size: self.parent.parent.height/30
                    font_style: 'H2'
                Widget:
                    size_hint: 1, None
                    height: self.parent.parent.height/400
                    canvas:
                        Color:
                            rgba: app.primary_font_color
                        Rectangle:
                            pos: self.pos
                            size: self.size
                MDLabel:
                    id: descryption
                    size_hint: 1,None
                    pos_hint: {'center_x':0.5}
                    height: self.texture_size[1]
                    text: ''
                    valign: 'top'
                    color: app.primary_font_color
                    text_size: (self.width*0.9,None)
                    font_size: self.parent.parent.height/30
                    font_style: 'Body2'


    FloatLayout: # Back_button_region
        size_hint: 1, 1.15/12
        pos_hint: {'center_x': 0.5, 'top': 1}
        Button:
            id: back_button
            size_hint: None, 0.9/1.25
            width: self.height
            pos_hint: {'center_x': 1.00001/12, 'center_y': 0.5}
            background_color: 0,0,0,0
            on_press:
                app.play_sound('sliding.wav')
                root.press_back(self)
            on_release:
                root.release_back(self)
            Image:
                id: back_button_image
                source: 'layout/img/backbutton.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                width: self.parent.width
                height: self.parent.height
                allow_stretch: True

<FilterScreen>:
    BoxLayout:
        canvas:
            Color:
                rgba: app.background_color
            Rectangle:
                pos: self.pos
                size: self.size
        orientation: 'vertical'

        Button:
            id: comname_filter
            content: 'comname'
            text: '  Common name'
            text_size: self.size
            color: app.primary_font_color
            background_down: 'layout/img/white_blank.png'
            background_normal: 'layout/img/white_blank.png'
            background_color: app.highlight_button
            valign: 'center'
            font_size: self.height*0.4
            on_press:
                app.play_sound('next2.wav')
                root.change_filter(self)
            on_release: root.shut_selector(self)
        Button:
            id: sciname_filter
            content: 'sciname'
            text: '  Scientific name'
            text_size: self.size
            color: app.primary_font_color
            background_down: 'layout/img/white_blank.png'
            background_normal: 'layout/img/white_blank.png'
            background_color: 0,0,0,0
            valign: 'center'
            font_size: self.height*0.4
            on_press:
                app.play_sound('next2.wav')
                root.change_filter(self)
            on_release: root.shut_selector(self)
        Button:
            id: none_filter
            content: ''
            text: '  None'
            text_size: self.size
            color: app.primary_font_color
            background_down: 'layout/img/white_blank.png'
            background_normal: 'layout/img/white_blank.png'
            background_color: 0,0,0,0
            valign: 'center'
            font_size: self.height*0.4
            on_press:
                app.play_sound('next2.wav')
                root.change_filter(self)
            on_release: root.shut_selector(self)


<WikiPage>:
    # background
    FloatLayout:
        canvas:
            Rectangle:
                pos: self.pos
                size: self.size
                texture: Gradient.vertical(app.secondary_background_color, app.secondary_background_color_fade)
        size_hint: 1, 0.2
        pos_hint: {'y':0.8}
    FloatLayout:
        canvas:
            Color:
                rgba: app.secondary_background_color
            Rectangle:
                pos: self.pos
                size: self.size
        size_hint: 1, 0.8
        pos_hint: {'y':0}
    #------------------------------------------------------------------
    BoxLayout: # text
        size_hint: 0.8,1/12
        pos_hint: {'center_x':0.5, 'top':11/12}
        MDLabel:
            id: encyclopedia
            text: 'ENCYCLOPEDIA'
            #font_style: 'H1'
            color: app.primary_font_color
            halign: 'center'
            font_size: self.parent.height/2
            bold: True
    FloatLayout: # Search bar
        size_hint: 0.9, 0.06
        pos_hint: {'center_x':0.5,'top':10/12}

        Button: # filter button
            id: filter_button
            name:'filter_button'
            content: 'comname'
            size_hint: (None,0.75)
            width: self.height
            pos_hint: {'x':0,'center_y':0.5}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
                app.play_sound('search.wav')
            on_release:
                root.release_button(self)
                root.load_filter_selector(self)
            Image:
                id: filter_button_image
                source: 'layout/img/filter.png'
                size: self.parent.size
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
        FloatLayout:
            canvas:
                Color:
                    rgba: 0.9,0.9,0.9,1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
            size_hint: 0.75,1
            pos_hint: {'center_x':0.5, 'center_y':0.5}
            MDTextField:
                id: search_bar
                max_text_length: 50
                size_hint: None,None
                height: self.parent.height
                width: self.parent.width*0.9
                text_color_focus: app.primary_background_color
                line_color_focus: app.primary_background_color
                pos_hint: {'center_x':0.5,'center_y':0.6}
                text_size: self.size
                font_size: self.height/3
        Button: # search_button
            id:search_button
            name: 'search_button'
            size_hint: (None,0.75)
            width: self.height
            pos_hint: {'right':1,'center_y':0.5}
            background_color: 0,0,0,0
            on_press:
                root.press_button(self)
                app.play_sound('search.wav')
            on_release:
                root.start_crawling(self)
                root.release_button(self)
            Image:
                id: search_button_image
                source: 'layout/img/search.png'
                size: self.parent.size
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity
    ScreenManager:
        Screen:
            id: encyclopedia_search_screen
            name: 'encyclopedia_search_screen'
            ScrollView:
                id: scroll_view
                size_hint: 0.9, float(0.75-1.15/12*2)
                pos_hint: {'center_x':0.5,'top':0.75}
                bar_color: 0,0,0,0
                bar_inactive_color: 0,0,0,0
                MDList:
                    canvas:
                        Color:
                            rgba: 1,1,1,0.2
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                    spacing: 20
                    id: search_list

            ScreenManager: # filter selector
                id: filter_selector_manager
                size_hint: 0.5,0.2
                pos_hint: {'x':0.025,'top':float(10/12-0.07)}
                background_color: 0,0,1,1
                Screen:
                    name: 'filter_null'
                FilterScreen:
                    name: 'filter_select'
            FloatLayout: # search page changer
                id:search_page_selector
                size_hint: 1, 1.15/12
                pos_hint: {'center_x':0.5, 'y':1.15/12}
                Label:
                    id:curr_over_total
                    size_hint: None,None
                    height: self.parent.height
                    width: self.height*4
                    pos_hint:{'center_x':0.5, 'center_y':0.5}
                    color: app.primary_font_color
                    halign: 'center'
                    valign: 'center'
                    text_size: self.size
                    font_size: self.height/2
                MDIconButton:
                    id: first_page
                    allowed: False
                    icon: 'skip-previous'
                    icon_color: app.primary_font_color
                    icon_size: self.parent.height
                    pos_hint: {'center_x':1/6}
                    center_y: self.parent.center_y
                    disabled: True if not self.allowed else False
                    opacity: 0.5 if not self.allowed else 1
                    on_press: app.play_sound('search.wav')
                    on_release: root.start_crawling('first')
                MDIconButton:
                    id: previous_page
                    allowed: False
                    icon: 'chevron-left'
                    icon_color: app.primary_font_color
                    icon_size: self.parent.height
                    pos_hint: {'center_x':1/3, 'center_y':0.5}
                    center_y: self.parent.center_y
                    disabled: True if not self.allowed else False
                    opacity: 0.5 if not self.allowed else 1
                    on_press: app.play_sound('search.wav')
                    on_release: root.start_crawling('previous')
                MDIconButton:
                    id: next_page
                    allowed: False
                    icon: 'chevron-right'
                    icon_color: app.primary_font_color
                    icon_size: self.parent.height
                    pos_hint: {'center_x':2/3}
                    center_y: self.parent.center_y
                    disabled: True if not self.allowed else False
                    opacity: 0.5 if not self.allowed else 1
                    on_press: app.play_sound('search.wav')
                    on_release: root.start_crawling('next')
                MDIconButton:
                    id: last_page
                    allowed: False
                    icon: 'skip-next'
                    icon_color: app.primary_font_color
                    icon_size: self.parent.height
                    pos_hint: {'center_x':5/6}
                    center_y: self.parent.center_y
                    disabled: True if not self.allowed else False
                    opacity: 0.5 if not self.allowed else 1
                    on_press: app.play_sound('search.wav')
                    on_release: root.start_crawling('last')
        SearchItemScreen:
            id: encyclopedia_search_item
            name: 'encyclopedia_search_item'





<ShoppingPage>:
    Image:
        source: 'layout/img/shopping.png'
        keep_ratio: True
        color: 1, 1, 1, 1  # Set image color to full opacity

<UtilityBars>:
    FloatLayout: # upper bar, mainly for setting
        size_hint: 1, 1.15/12
        pos_hint: {'center_x': 0.5, 'top': 1}
        canvas:
            Color:
                rgba: 0,0,0,0
            Rectangle:
                pos: self.pos
                size: self.size

        Button: # setting button
            size_hint: None,1/1.15
            width: self.height
            pos_hint: {'center_x': 11/12, 'center_y':0.5}
            background_color: 0,0,0,0
            on_press: app.play_sound('sliding.wav')
            on_release:
                root.open_setting(self)

            FloatLayout:
                height: self.parent.height*0.75
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                canvas:
                    Color:
                        rgba: 176/255, 211/255, 141/255, 1
                    Ellipse:
                        pos: self.pos
                        size: self.size
            Image:
                source: 'layout/img/setting_icon.png'
                height: self.parent.height*0.8
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: True
                color: 1, 1, 1, 1  # Set image color to full opacity

    FloatLayout:
        canvas:
            Rectangle:
                pos: self.pos
                size: self.size
                texture: Gradient.vertical((0,0,0,0.1), (0,0,0,0))
        size_hint: 1, 0.1/12
        pos_hint: {'y':1.15/12}
    FloatLayout: # bottom bar
        size_hint: 1, 1.15/12
        pos_hint: {'center_x': 0.5, 'y': 0}

        canvas:
            Color:
                rgba: app.background_color
            Rectangle:
                pos: self.pos
                size: self.size

        FloatLayout: # Selection highlight for home buttons
            id:home_highlight
            size_hint: None, 0.9/1.25
            width: self.height
            pos_hint: {'center_x': 1.00001/12, 'center_y': 0.5}
            canvas:
                Color:
                    rgba: app.highlight_button
                Rectangle:
                    pos: self.pos
                    size: self.size

        # All the selection buttons
        Button:
            id: home
            name: 'home'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 1.00001/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_press: app.play_sound('next2.wav')
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/home_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                allow_stretch: False
                keep_ratio: False
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: plant_profile
            name: 'plant_profile'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 3/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_press: app.play_sound('next2.wav')
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/plant_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: calendar
            name: 'calendar'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 5/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_press: app.play_sound('next2.wav')
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/calendar_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: community
            name: 'community'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 7/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_press: app.play_sound('next2.wav')
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/community_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: wiki
            name: 'wiki'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 9/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_press: app.play_sound('next2.wav')
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/wiki_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
        Button:
            id: shopping
            name: 'shopping'
            size_hint: None, 1/1.25  # Make width fixed
            width: self.height  # Make width equal to height
            pos_hint: {'center_x': 11/12, 'center_y':0.5}
            background_color: 0, 0, 0, 0
            on_press: app.play_sound('next2.wav')
            on_release:
                root.home_buttons_animation(self)
            Image:
                source: 'layout/img/shopping_button.png'
                height: self.parent.height*0.6
                width: self.height
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                color: 1, 1, 1, 1  # Set image color to full opacity
